(this["webpackJsonpsuper-tic-tac-toe"]=this["webpackJsonpsuper-tic-tac-toe"]||[]).push([[0],{35:function(e,n,t){},44:function(e,n,t){"use strict";t.r(n);var i,a=t(0),c=t.n(a),r=t(17),s=t.n(r),l=(t(35),t(11)),o=t(5),d=(t(36),t(12)),j=t(16),u=t(9),b=t(19),h=t(20);!function(e){e[e.Small=0]="Small",e[e.Medium=1]="Medium",e[e.Large=2]="Large"}(i||(i={}));var p,x,g,O,f,y,m,v,w,C,N,P,k,S,M,I,L,G,z,D,T,W,E,F=t(24),A=function(){function e(n){var t=n.size;Object(b.a)(this,e),this.winningMoves=void 0,this.winningMoves=function(e){for(var n=[],t=0;t<e;t++){for(var i=[],a=[],c=0;c<e;c++)i.push({x:t,y:c}),a.push({x:c,y:t});n.push(i),n.push(a)}for(var r=[],s=[],l=0;l<e;l++)r.push({x:l,y:l}),s.push({x:l,y:e-1-l});return n.push(r),n.push(s),n}(t)}return Object(h.a)(e,[{key:"getWinner",value:function(e){var n,t=Object(F.a)(this.winningMoves);try{for(t.s();!(n=t.n()).done;){var i,a=n.value,c=null,r=Object(F.a)(a);try{for(r.s();!(i=r.n()).done;){var s,l=i.value,o=l.x,d=l.y,j=null===(s=e[o][d])||void 0===s?void 0:s.player;if(!j){c=null;break}if(c){if(c!==j){c=null;break}}else c=j}}catch(u){r.e(u)}finally{r.f()}if(c)return{player:c,locations:a}}}catch(u){t.e(u)}finally{t.f()}return null}}]),e}(),R=function(){function e(n){var t=n.size,i=n.players,a=n.tiles;Object(b.a)(this,e),this.players=void 0,this.playerIndex=0,this.tiles=void 0,this.history=[],this.winDetector=void 0,this.players=i,this.tiles=a||function(e){return Array.from(new Array(e),(function(){return new Array(e).fill(null)}))}(t),this.winDetector=new A({size:t})}return Object(h.a)(e,[{key:"playerCount",get:function(){return this.players.length}},{key:"nextPlayer",get:function(){return this.players[this.playerIndex]}},{key:"getTiles",value:function(){return this.tiles}},{key:"createMove",value:function(e){var n=e.x,t=e.y,i=e.pin,a=this.nextPlayer;this.tiles[n][t]={player:a,pin:i},this.history.push({x:n,y:t,pin:i,player:a}),this.goToNextPlayer()}},{key:"goToNextPlayer",value:function(){this.playerIndex++,"undefined"===typeof this.players[this.playerIndex]&&(this.playerIndex=0)}},{key:"validate",value:function(e){var n,t=e.x,i=e.y,a=e.pin,c=null===(n=this.tiles[t][i])||void 0===n?void 0:n.pin;return"undefined"===typeof c||c<a}},{key:"getWinner",value:function(){return this.winDetector.getWinner(this.tiles)}}]),e}(),q=["is-primary","is-warning","is-success","is-error","is-disabled"],B=function(){function e(n){var t=this,a=n.ids,c=n.pieceCount,r=void 0===c?3:c;Object(b.a)(this,e),this.players={},a.forEach((function(e,n){t.players[e]=function(e){var n,t=e.id,a=e.index,c=e.pieceCount;return{id:t,name:"P".concat(a+1),cssClass:q[a],pieces:(n={},Object(d.a)(n,i.Small,c),Object(d.a)(n,i.Medium,c),Object(d.a)(n,i.Large,c),n)}}({id:e,index:n,pieceCount:r})}))}return Object(h.a)(e,[{key:"getPlayers",value:function(){return Object.values(this.players)}},{key:"removePin",value:function(e){var n=e.pin,t=e.player;return!!this.players[t].pieces[n]&&(this.players[t].pieces[n]--,!0)}},{key:"getPlayer",value:function(e){if(e)return this.players[e]}}]),e}(),H=t(1),J={playerCount:2,gameSize:3},Q={setting:Object(u.a)({},J),game:null,playerManager:null},K=Object(a.createContext)(Q),U=function(e){var n=e.children,t=Object(a.useState)(J),i=Object(j.a)(t,2),c=i[0],r=i[1],s=Object(a.useState)(null),l=Object(j.a)(s,2),o=l[0],b=l[1],h=Object(a.useState)(null),p=Object(j.a)(h,2),x=p[0],g=p[1],O=Object(a.useCallback)((function(e,n){r(Object(u.a)(Object(u.a)({},c),{},Object(d.a)({},e,n)))}),[c,r]),f=Object(a.useCallback)((function(){var e=Array.from(new Array(c.playerCount),(function(){return"".concat(Math.random())}));b(new B({ids:e,pieceCount:c.gameSize})),g(new R({size:c.gameSize,players:e}))}),[c,g]);return Object(H.jsx)(K.Provider,{value:{setting:c,changeSetting:O,game:x,newGame:f,playerManager:o},children:n})},V=t(3),X=t(4),Y=X.a.div(p||(p=Object(V.a)(["\n  padding: 8px;\n  max-width: 900px;\n  margin: auto;\n\n  ","\n"])),(function(e){return!e.isGameLayout&&"\n     height: 98%;\n  "})),Z=X.a.div(x||(x=Object(V.a)(["\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n"]))),$=function(e){var n=e.title,t=e.isGameLayout,i=e.children;return Object(H.jsx)(Y,{isGameLayout:t,children:Object(H.jsxs)(Z,{className:"nes-container with-title is-centered is-rounded",children:[Object(H.jsx)("p",{className:"title",children:n}),i]})})},_=X.a.div(g||(g=Object(V.a)(["\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  text-align: left;\n"]))),ee=function(){return Object(H.jsxs)($,{title:"Super Tic Tak Toe",children:[Object(H.jsxs)(_,{children:[Object(H.jsx)("p",{children:"Welcome to"}),Object(H.jsx)("p",{children:"our awesome game of tic tak toe"}),Object(H.jsx)("p",{children:"on steroids!"})]}),Object(H.jsx)(l.b,{to:"/game-setting",className:"nes-btn is-primary",children:"Play !"})]})},ne=t(15),te=X.a.div(O||(O=Object(V.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n"]))),ie=Object(X.a)(te)(f||(f=Object(V.a)(["\n  width: 40px;\n  height: 40px;\n"]))),ae=Object(X.a)(te)(y||(y=Object(V.a)(["\n  width: 60px;\n  height: 60px;\n"]))),ce=Object(X.a)(te)(m||(m=Object(V.a)(["\n  width: 80px;\n  height: 80px;\n"]))),re=function(e){var n=e.pin,t=e.children,a=e.className;switch(n){case i.Small:return Object(H.jsx)(ie,{className:"nes-btn ".concat(a),children:t});case i.Medium:return Object(H.jsx)(ae,{className:"nes-btn ".concat(a),children:t});case i.Large:return Object(H.jsx)(ce,{className:"nes-btn ".concat(a),children:t});default:return Object(H.jsx)("div",{children:"unknown pin received"})}},se=X.a.div(v||(v=Object(V.a)(["\n  display: none;\n"]))),le=X.a.div(w||(w=Object(V.a)(["\n  opacity: 0.2;\n  font-size: small;\n"]))),oe=X.a.div(C||(C=Object(V.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border: 1px dashed gray;\n  width: 120px;\n  height: 120px;\n\n  ","\n  ","\n"])),(function(e){return e.isWinner&&"\n    background-color: #33eb91;\n    animation: blinker 1s step-start infinite;\n    "}),(function(e){return e.isDraggingOver&&"background-color: #8561c5;"})),de=function(e){switch(e){case i.Small:return"S";case i.Medium:return"M";case i.Large:return"L";default:return"unknown"}},je=function(e){var n=e.tile,t=e.y,i=e.x,c=e.isWinner,r=void 0!==c&&c,s=Object(a.useContext)(K).playerManager,l=null===s||void 0===s?void 0:s.getPlayer(null===n||void 0===n?void 0:n.player);return Object(H.jsx)(ne.c,{droppableId:"".concat(i,"-").concat(t),children:function(e,a){return Object(H.jsxs)(oe,Object(u.a)(Object(u.a)({ref:e.innerRef},e.droppableProps),{},{isDraggingOver:a.isDraggingOver,isWinner:r,children:[!l&&Object(H.jsxs)(le,{children:[i+1,"-",t+1]}),l&&"undefined"!==typeof(null===n||void 0===n?void 0:n.pin)&&Object(H.jsx)(re,{pin:n.pin,className:l.cssClass,children:de(n.pin)}),Object(H.jsx)(se,{children:e.placeholder})]}))}})},ue=X.a.div(N||(N=Object(V.a)(["\n  display: flex;\n  flex-direction: row;\n"]))),be=function(e){var n=e.x,t=e.y;return function(e){return n===e.x&&t===e.y}},he=function(e){var n=e.row,t=e.x,i=e.winnerLocations;return Object(H.jsx)(ue,{children:n.map((function(e,n){return Object(H.jsx)(je,{tile:e,y:n,x:t,isWinner:i&&i.some(be({x:t,y:n}))},"".concat(t,"-").concat(n))}))})},pe=X.a.div(P||(P=Object(V.a)(["\n  border-radius: 10%;\n  ","\n"])),(function(e){return e.selected&&"\n    animation: blinker 1s step-start infinite;\n  "})),xe=X.a.span(k||(k=Object(V.a)([""]))),ge=function(e){var n=e.selected,t=void 0!==n&&n,i=e.className,a=e.name;return Object(H.jsx)(pe,{selected:t,children:Object(H.jsx)(xe,{className:"nes-text ".concat(i),children:a})})},Oe=X.a.div(S||(S=Object(V.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: space-evenly;\n  align-items: center;\n  width: 100%;\n  height: 80px;\n"]))),fe=X.a.h3(M||(M=Object(V.a)([""]))),ye=X.a.h4(I||(I=Object(V.a)([""]))),me=X.a.h6(L||(L=Object(V.a)([""]))),ve=function(e){var n=e.children,t=e.draggableId,i=e.draggableIndex;return Object(H.jsx)(ne.b,{draggableId:t,index:i,children:function(e){return Object(H.jsx)("div",Object(u.a)(Object(u.a)(Object(u.a)({ref:e.innerRef},e.draggableProps),e.dragHandleProps),{},{children:n}))}})},we=function(e){var n=e.player;return Object(H.jsxs)(Oe,{children:[n.pieces[i.Large]>0&&Object(H.jsx)(ve,{draggableId:"draggable-1",draggableIndex:i.Large,children:Object(H.jsx)(re,{pin:i.Large,className:n.cssClass,children:Object(H.jsxs)(fe,{children:["Lx",n.pieces[i.Large]]})})}),n.pieces[i.Medium]>0&&Object(H.jsx)(ve,{draggableId:"draggable-2",draggableIndex:i.Medium,children:Object(H.jsx)(re,{pin:i.Medium,className:n.cssClass,children:Object(H.jsxs)(ye,{children:["Mx",n.pieces[i.Medium]]})})}),n.pieces[i.Small]>0&&Object(H.jsx)(ve,{draggableId:"draggable-3",draggableIndex:i.Small,children:Object(H.jsx)(re,{pin:i.Small,className:n.cssClass,children:Object(H.jsxs)(me,{children:["Sx",n.pieces[i.Small]]})})})]})},Ce=X.a.dialog(G||(G=Object(V.a)(["\n  position: absolute;\n  width: 70%;\n  top: 20%;\n  left: 0;\n  right: 0;\n  margin-left: auto;\n  margin-right: auto;\n  background-color: #fff;\n"]))),Ne=function(e){var n=e.winner,t=e.newGame;return Object(H.jsx)(Ce,{className:"nes-dialog is-rounded",open:!0,children:Object(H.jsxs)("form",{method:"dialog",children:[Object(H.jsx)("p",{className:"title",children:"Game over"}),Object(H.jsxs)("p",{children:[n," is the winner!!"]}),Object(H.jsx)("p",{children:"Good job :)"}),Object(H.jsxs)("menu",{className:"dialog-menu",children:[Object(H.jsx)(l.b,{to:"/game-setting",className:"nes-btn",children:"Change settings"}),"\xa0",Object(H.jsx)("button",{className:"nes-btn is-primary",onClick:t,children:"Play again"})]})]})})},Pe=X.a.div(z||(z=Object(V.a)(["\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-around;\n"]))),ke=X.a.div(D||(D=Object(V.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n"]))),Se=X.a.div(T||(T=Object(V.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: space-evenly;\n  align-items: center;\n  padding: 16px 0;\n"]))),Me=function(){var e,n=function(){var e=Object(a.useContext)(K),n=e.game,t=e.newGame,i=e.playerManager,c=Object(a.useState)(0),r=Object(j.a)(c,2),s=r[0],l=r[1],o=null===n||void 0===n?void 0:n.nextPlayer,d=(null===i||void 0===i?void 0:i.getPlayers())||[],u=null===n||void 0===n?void 0:n.getWinner();return Object(a.useEffect)((function(){!n&&t&&t()}),[]),{game:n,playerManager:i,nextPlayer:o,players:d,onDragEnd:function(e,t){var a;if(console.log("onDragEnd",{result:e,provided:t}),n&&i&&o){var c=e.source.index,r=null===(a=e.destination)||void 0===a?void 0:a.droppableId;if(r){var d=r.split("-"),u=Object(j.a)(d,2),b=u[0],h=u[1],p=parseInt(b,10),x=parseInt(h,10);isNaN(p)||isNaN(x)||!n.validate({x:p,y:x,pin:c})?console.log("invalid move"):i.removePin({pin:c,player:o})?(n.createMove({x:p,y:x,pin:c}),l(s+1)):console.log("unable to remove pin")}else console.log("no destination tile found")}else console.log("game is not ready")},gameWinner:u,newGame:t}}(),t=n.game,i=n.playerManager,c=n.nextPlayer,r=n.players,s=n.onDragEnd,o=n.gameWinner,d=n.newGame;return t&&i&&c?Object(H.jsxs)($,{title:"Tic Tac Toe",isGameLayout:!0,children:[Object(H.jsx)(Pe,{children:Object(H.jsxs)(ne.a,{onDragEnd:s,children:[Object(H.jsxs)(Se,{children:[r.map((function(e){return Object(H.jsx)(ge,{selected:!o&&e.id===c,className:e.cssClass,name:e.name},e.id)})),Object(H.jsxs)("div",{children:[Object(H.jsx)("button",{className:"nes-btn",onClick:d,children:"reset"}),"\xa0",Object(H.jsx)(l.b,{to:"/game-setting",className:"nes-btn",children:"setting"})]})]}),Object(H.jsx)(ne.c,{droppableId:"playerPieces",isDropDisabled:!0,children:function(e){return Object(H.jsxs)(Se,Object(u.a)(Object(u.a)({ref:e.innerRef},e.droppableProps),{},{children:[r.map((function(e){return e.id===c?Object(H.jsx)(we,{player:e},e.id):null})),Object(H.jsx)(se,{children:e.placeholder})]}))}}),Object(H.jsx)(ke,{children:t.getTiles().map((function(e,n){return Object(H.jsx)(he,{row:e,x:n,winnerLocations:null===o||void 0===o?void 0:o.locations},n)}))})]})}),!!o&&Object(H.jsx)(Ne,{winner:(null===(e=i.getPlayer(o.player))||void 0===e?void 0:e.name)||o.player,newGame:d})]}):Object(H.jsx)($,{title:"Loading ...",children:Object(H.jsxs)("div",{children:[Object(H.jsx)("div",{className:"nes-octocat animate"}),"Hi :)"]})})},Ie=function(){return Object(H.jsx)("h1",{children:"AboutMePage"})},Le=function(){return Object(H.jsx)("h1",{children:"NotFoundPage"})},Ge=X.a.div(W||(W=Object(V.a)(["\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  text-align: left;\n"]))),ze=X.a.div(E||(E=Object(V.a)(["\n  margin-bottom: 16px;\n"]))),De=function(){var e=Object(a.useContext)(K),n=e.setting,t=e.changeSetting,i=e.newGame,c=function(e){var n=e.target,i=n.name,a=n.value;null===t||void 0===t||t(i,parseInt(a,10))};return Object(H.jsxs)($,{title:"Game setting",children:[Object(H.jsxs)(Ge,{children:[Object(H.jsx)("p",{children:"Quickly set game settings"}),Object(H.jsx)("label",{htmlFor:"playerCount",children:"Player count:"}),Object(H.jsx)(ze,{className:"nes-select",children:Object(H.jsxs)("select",{required:!0,id:"playerCount",name:"playerCount",onChange:c,value:n.playerCount,children:[Object(H.jsx)("option",{value:2,children:"2 Players"}),Object(H.jsx)("option",{value:3,children:"3 Players"}),Object(H.jsx)("option",{value:4,children:"4 Players"})]})}),Object(H.jsx)("label",{htmlFor:"gameSize",children:"Game size:"}),Object(H.jsx)(ze,{className:"nes-select",children:Object(H.jsxs)("select",{required:!0,id:"gameSize",name:"gameSize",onChange:c,value:n.gameSize,children:[Object(H.jsx)("option",{value:3,children:"3x3"}),Object(H.jsx)("option",{value:5,children:"5x5"}),Object(H.jsx)("option",{value:7,children:"7x7"})]})})]}),Object(H.jsx)(l.b,{to:"/game",className:"nes-btn is-primary",onClick:i,children:"Play !"})]})},Te=function(){return Object(H.jsx)(U,{children:Object(H.jsx)(l.a,{children:Object(H.jsxs)(o.c,{children:[Object(H.jsx)(o.a,{path:"/about-me",children:Object(H.jsx)(Ie,{})}),Object(H.jsx)(o.a,{path:"/game",children:Object(H.jsx)(Me,{})}),Object(H.jsx)(o.a,{path:"/game-setting",children:Object(H.jsx)(De,{})}),Object(H.jsx)(o.a,{path:"/",exact:!0,children:Object(H.jsx)(ee,{})}),Object(H.jsx)(o.a,{path:"*",children:Object(H.jsx)(Le,{})})]})})})},We=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,45)).then((function(n){var t=n.getCLS,i=n.getFID,a=n.getFCP,c=n.getLCP,r=n.getTTFB;t(e),i(e),a(e),c(e),r(e)}))};s.a.render(Object(H.jsx)(c.a.StrictMode,{children:Object(H.jsx)(Te,{})}),document.getElementById("root")),We()}},[[44,1,2]]]);
//# sourceMappingURL=main.5a8e784e.chunk.js.map