(this["webpackJsonpsuper-tic-tac-toe"]=this["webpackJsonpsuper-tic-tac-toe"]||[]).push([[0],{35:function(e,n,t){},44:function(e,n,t){"use strict";t.r(n);var i,a=t(0),c=t.n(a),r=t(17),s=t.n(r),l=(t(35),t(11)),o=t(5),d=(t(36),t(12)),j=t(16),u=t(9),b=t(19),h=t(20);!function(e){e[e.Small=0]="Small",e[e.Medium=1]="Medium",e[e.Large=2]="Large"}(i||(i={}));var x,p,O,g,y,f,m,v,w,N,P,k,C,S,M,I,L,G,D,T,z,W,E=t(24),F=function(){function e(n){var t=n.size;Object(b.a)(this,e),this.winningMoves=void 0,this.winningMoves=function(e){for(var n=[],t=0;t<e;t++){for(var i=[],a=[],c=0;c<e;c++)i.push({x:t,y:c}),a.push({x:c,y:t});n.push(i),n.push(a)}for(var r=[],s=[],l=0;l<e;l++)r.push({x:l,y:l}),s.push({x:l,y:e-1-l});return n.push(r),n.push(s),n}(t)}return Object(h.a)(e,[{key:"getWinner",value:function(e){var n,t=Object(E.a)(this.winningMoves);try{for(t.s();!(n=t.n()).done;){var i,a=n.value,c=null,r=Object(E.a)(a);try{for(r.s();!(i=r.n()).done;){var s,l=i.value,o=l.x,d=l.y,j=null===(s=e[o][d])||void 0===s?void 0:s.player;if(!j){c=null;break}if(c){if(c!==j){c=null;break}}else c=j}}catch(u){r.e(u)}finally{r.f()}if(c)return{player:c,locations:a}}}catch(u){t.e(u)}finally{t.f()}return null}}]),e}(),A=function(){function e(n){var t=n.size,i=n.players,a=n.tiles;Object(b.a)(this,e),this.players=void 0,this.playerIndex=0,this.tiles=void 0,this.history=[],this.winDetector=void 0,this.players=i,this.tiles=a||function(e){return Array.from(new Array(e),(function(){return new Array(e).fill(null)}))}(t),this.winDetector=new F({size:t})}return Object(h.a)(e,[{key:"playerCount",get:function(){return this.players.length}},{key:"nextPlayer",get:function(){return this.players[this.playerIndex]}},{key:"getTiles",value:function(){return this.tiles}},{key:"createMove",value:function(e){var n=e.x,t=e.y,i=e.pin,a=this.nextPlayer;this.tiles[n][t]={player:a,pin:i},this.history.push({x:n,y:t,pin:i,player:a}),this.goToNextPlayer()}},{key:"goToNextPlayer",value:function(){this.playerIndex++,"undefined"===typeof this.players[this.playerIndex]&&(this.playerIndex=0)}},{key:"validate",value:function(e){var n,t=e.x,i=e.y,a=e.pin,c=null===(n=this.tiles[t][i])||void 0===n?void 0:n.pin;return"undefined"===typeof c||c<a}},{key:"getWinner",value:function(){return this.winDetector.getWinner(this.tiles)}}]),e}(),R=["is-primary","is-warning","is-success","is-error","is-disabled"],q=function(){function e(n){var t=this,a=n.ids;Object(b.a)(this,e),this.players={},a.forEach((function(e,n){t.players[e]=function(e){var n,t=e.id,a=e.index;return{id:t,name:"P".concat(a+1),cssClass:R[a],pieces:(n={},Object(d.a)(n,i.Small,3),Object(d.a)(n,i.Medium,3),Object(d.a)(n,i.Large,3),n)}}({id:e,index:n})}))}return Object(h.a)(e,[{key:"getPlayers",value:function(){return Object.values(this.players)}},{key:"removePin",value:function(e){var n=e.pin,t=e.player;return!!this.players[t].pieces[n]&&(this.players[t].pieces[n]--,!0)}},{key:"getPlayer",value:function(e){if(e)return this.players[e]}}]),e}(),B=t(1),H={playerCount:2,gameSize:3},J={setting:Object(u.a)({},H),game:null,playerManager:null},Q=Object(a.createContext)(J),K=function(e){var n=e.children,t=Object(a.useState)(H),i=Object(j.a)(t,2),c=i[0],r=i[1],s=Object(a.useState)(null),l=Object(j.a)(s,2),o=l[0],b=l[1],h=Object(a.useState)(null),x=Object(j.a)(h,2),p=x[0],O=x[1],g=Object(a.useCallback)((function(e,n){r(Object(u.a)(Object(u.a)({},c),{},Object(d.a)({},e,n)))}),[c,r]),y=Object(a.useCallback)((function(){var e=Array.from(new Array(c.playerCount),(function(){return"".concat(Math.random())}));b(new q({ids:e})),O(new A({size:c.gameSize,players:e}))}),[c,O]);return Object(B.jsx)(Q.Provider,{value:{setting:c,changeSetting:g,game:p,newGame:y,playerManager:o},children:n})},U=t(3),V=t(4),X=V.a.div(x||(x=Object(U.a)(["\n  padding: 8px;\n\n  ","\n"])),(function(e){return!e.isGameLayout&&"\n     height: 98%;\n  "})),Y=V.a.div(p||(p=Object(U.a)(["\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n"]))),Z=function(e){var n=e.title,t=e.isGameLayout,i=e.children;return Object(B.jsx)(X,{isGameLayout:t,children:Object(B.jsxs)(Y,{className:"nes-container with-title is-centered is-rounded",children:[Object(B.jsx)("p",{className:"title",children:n}),i]})})},$=V.a.div(O||(O=Object(U.a)(["\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  text-align: left;\n"]))),_=function(){return Object(B.jsxs)(Z,{title:"Super Tic Tak Toe",children:[Object(B.jsxs)($,{children:[Object(B.jsx)("p",{children:"Welcome to"}),Object(B.jsx)("p",{children:"our awesome game of tic tak toe"}),Object(B.jsx)("p",{children:"on steroids!"})]}),Object(B.jsx)(l.b,{to:"/game-setting",className:"nes-btn is-primary",children:"Play !"})]})},ee=t(15),ne=V.a.div(g||(g=Object(U.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n"]))),te=Object(V.a)(ne)(y||(y=Object(U.a)(["\n  width: 40px;\n  height: 40px;\n"]))),ie=Object(V.a)(ne)(f||(f=Object(U.a)(["\n  width: 60px;\n  height: 60px;\n"]))),ae=Object(V.a)(ne)(m||(m=Object(U.a)(["\n  width: 80px;\n  height: 80px;\n"]))),ce=function(e){var n=e.pin,t=e.children,a=e.className;switch(n){case i.Small:return Object(B.jsx)(te,{className:"nes-btn ".concat(a),children:t});case i.Medium:return Object(B.jsx)(ie,{className:"nes-btn ".concat(a),children:t});case i.Large:return Object(B.jsx)(ae,{className:"nes-btn ".concat(a),children:t});default:return Object(B.jsx)("div",{children:"unknown pin received"})}},re=V.a.div(v||(v=Object(U.a)(["\n  display: none;\n"]))),se=V.a.div(w||(w=Object(U.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border: 1px dashed gray;\n  width: 120px;\n  height: 120px;\n\n  ","\n  ","\n"])),(function(e){return e.isWinner&&"\n    background-color: #33eb91;\n    animation: blinker 1s step-start infinite;\n    "}),(function(e){return e.isDraggingOver&&"background-color: #8561c5;"})),le=function(e){switch(e){case i.Small:return"S";case i.Medium:return"M";case i.Large:return"L";default:return"unknown"}},oe=function(e){var n=e.tile,t=e.y,i=e.x,c=e.isWinner,r=void 0!==c&&c,s=Object(a.useContext)(Q).playerManager,l=null===s||void 0===s?void 0:s.getPlayer(null===n||void 0===n?void 0:n.player);return Object(B.jsx)(ee.c,{droppableId:"".concat(i,"-").concat(t),children:function(e,t){return Object(B.jsxs)(se,Object(u.a)(Object(u.a)({ref:e.innerRef},e.droppableProps),{},{isDraggingOver:t.isDraggingOver,isWinner:r,children:[!l&&Object(B.jsx)("div",{}),l&&"undefined"!==typeof(null===n||void 0===n?void 0:n.pin)&&Object(B.jsx)(ce,{pin:n.pin,className:l.cssClass,children:le(n.pin)}),Object(B.jsx)(re,{children:e.placeholder})]}))}})},de=V.a.div(N||(N=Object(U.a)(["\n  display: flex;\n  flex-direction: row;\n"]))),je=function(e){var n=e.x,t=e.y;return function(e){return n===e.x&&t===e.y}},ue=function(e){var n=e.row,t=e.x,i=e.winnerLocations;return Object(B.jsx)(de,{children:n.map((function(e,n){return Object(B.jsx)(oe,{tile:e,y:n,x:t,isWinner:i&&i.some(je({x:t,y:n}))},"".concat(t,"-").concat(n))}))})},be=V.a.div(P||(P=Object(U.a)(["\n  border-radius: 10%;\n  ","\n"])),(function(e){return e.selected&&"\n    animation: blinker 1s step-start infinite;\n  "})),he=V.a.span(k||(k=Object(U.a)([""]))),xe=function(e){var n=e.selected,t=void 0!==n&&n,i=e.className,a=e.name;return Object(B.jsx)(be,{selected:t,children:Object(B.jsx)(he,{className:"nes-text ".concat(i),children:a})})},pe=V.a.div(C||(C=Object(U.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: space-evenly;\n  align-items: center;\n  width: 100%;\n  height: 80px;\n"]))),Oe=V.a.h3(S||(S=Object(U.a)([""]))),ge=V.a.h4(M||(M=Object(U.a)([""]))),ye=V.a.h6(I||(I=Object(U.a)([""]))),fe=function(e){var n=e.children,t=e.draggableId,i=e.draggableIndex;return Object(B.jsx)(ee.b,{draggableId:t,index:i,children:function(e){return Object(B.jsx)("div",Object(u.a)(Object(u.a)(Object(u.a)({ref:e.innerRef},e.draggableProps),e.dragHandleProps),{},{children:n}))}})},me=function(e){var n=e.player;return Object(B.jsxs)(pe,{children:[n.pieces[i.Large]>0&&Object(B.jsx)(fe,{draggableId:"draggable-1",draggableIndex:i.Large,children:Object(B.jsx)(ce,{pin:i.Large,className:n.cssClass,children:Object(B.jsxs)(Oe,{children:["Lx",n.pieces[i.Large]]})})}),n.pieces[i.Medium]>0&&Object(B.jsx)(fe,{draggableId:"draggable-2",draggableIndex:i.Medium,children:Object(B.jsx)(ce,{pin:i.Medium,className:n.cssClass,children:Object(B.jsxs)(ge,{children:["Mx",n.pieces[i.Medium]]})})}),n.pieces[i.Small]>0&&Object(B.jsx)(fe,{draggableId:"draggable-3",draggableIndex:i.Small,children:Object(B.jsx)(ce,{pin:i.Small,className:n.cssClass,children:Object(B.jsxs)(ye,{children:["Sx",n.pieces[i.Small]]})})})]})},ve=V.a.dialog(L||(L=Object(U.a)(["\n  width: 100%;\n  top: 25%;\n"]))),we=function(e){var n=e.winner,t=e.newGame;return Object(B.jsx)(ve,{className:"nes-dialog",open:!0,children:Object(B.jsxs)("form",{method:"dialog",children:[Object(B.jsx)("p",{className:"title",children:"Game over"}),Object(B.jsxs)("p",{children:[n," is the winner!!"]}),Object(B.jsx)("p",{children:"Good job :)"}),Object(B.jsxs)("menu",{className:"dialog-menu",children:[Object(B.jsx)(l.b,{to:"/game-setting",className:"nes-btn",children:"Change settings"}),"\xa0",Object(B.jsx)("button",{className:"nes-btn is-primary",onClick:t,children:"Play again"})]})]})})},Ne=V.a.div(G||(G=Object(U.a)(["\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-around;\n"]))),Pe=V.a.div(D||(D=Object(U.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n"]))),ke=V.a.div(T||(T=Object(U.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: space-evenly;\n  align-items: center;\n  padding: 16px 0;\n"]))),Ce=function(){var e,n=function(){var e=Object(a.useContext)(Q),n=e.game,t=e.newGame,i=e.playerManager,c=Object(a.useState)(0),r=Object(j.a)(c,2),s=r[0],l=r[1],o=null===n||void 0===n?void 0:n.nextPlayer,d=(null===i||void 0===i?void 0:i.getPlayers())||[],u=null===n||void 0===n?void 0:n.getWinner();return Object(a.useEffect)((function(){!n&&t&&t()}),[]),{game:n,playerManager:i,nextPlayer:o,players:d,onDragEnd:function(e,t){var a;if(console.log("onDragEnd",{result:e,provided:t}),n&&i&&o){var c=e.source.index,r=null===(a=e.destination)||void 0===a?void 0:a.droppableId;if(r){var d=r.split("-"),u=Object(j.a)(d,2),b=u[0],h=u[1],x=parseInt(b,10),p=parseInt(h,10);isNaN(x)||isNaN(p)||!n.validate({x:x,y:p,pin:c})?console.log("invalid move"):i.removePin({pin:c,player:o})?(n.createMove({x:x,y:p,pin:c}),l(s+1)):console.log("unable to remove pin")}else console.log("no destination tile found")}else console.log("game is not ready")},gameWinner:u,newGame:t}}(),t=n.game,i=n.playerManager,c=n.nextPlayer,r=n.players,s=n.onDragEnd,o=n.gameWinner,d=n.newGame;return t&&i&&c?Object(B.jsxs)(Z,{title:"Tic Tac Toe",isGameLayout:!0,children:[Object(B.jsx)(Ne,{children:Object(B.jsxs)(ee.a,{onDragEnd:s,children:[Object(B.jsxs)(ke,{children:[r.map((function(e){return Object(B.jsx)(xe,{selected:!o&&e.id===c,className:e.cssClass,name:e.name},e.id)})),Object(B.jsxs)("div",{children:[Object(B.jsx)("button",{className:"nes-btn",onClick:d,children:"reset"}),"\xa0",Object(B.jsx)(l.b,{to:"/game-setting",className:"nes-btn",children:"setting"})]})]}),Object(B.jsx)(ee.c,{droppableId:"playerPieces",isDropDisabled:!0,children:function(e){return Object(B.jsxs)(ke,Object(u.a)(Object(u.a)({ref:e.innerRef},e.droppableProps),{},{children:[r.map((function(e){return e.id===c?Object(B.jsx)(me,{player:e},e.id):null})),Object(B.jsx)(re,{children:e.placeholder})]}))}}),Object(B.jsx)(Pe,{children:t.getTiles().map((function(e,n){return Object(B.jsx)(ue,{row:e,x:n,winnerLocations:null===o||void 0===o?void 0:o.locations},n)}))})]})}),!!o&&Object(B.jsx)(we,{winner:(null===(e=i.getPlayer(o.player))||void 0===e?void 0:e.name)||o.player,newGame:d})]}):Object(B.jsx)(Z,{title:"Loading ...",children:Object(B.jsxs)("div",{children:[Object(B.jsx)("div",{className:"nes-octocat animate"}),"Hi :)"]})})},Se=function(){return Object(B.jsx)("h1",{children:"AboutMePage"})},Me=function(){return Object(B.jsx)("h1",{children:"NotFoundPage"})},Ie=V.a.div(z||(z=Object(U.a)(["\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  text-align: left;\n"]))),Le=V.a.div(W||(W=Object(U.a)(["\n  margin-bottom: 16px;\n"]))),Ge=function(){var e=Object(a.useContext)(Q),n=e.setting,t=e.changeSetting,i=e.newGame,c=function(e){var n=e.target,i=n.name,a=n.value;null===t||void 0===t||t(i,parseInt(a,10))};return Object(B.jsxs)(Z,{title:"Game setting",children:[Object(B.jsxs)(Ie,{children:[Object(B.jsx)("p",{children:"Quickly set game settings"}),Object(B.jsx)("label",{htmlFor:"playerCount",children:"Player count:"}),Object(B.jsx)(Le,{className:"nes-select",children:Object(B.jsxs)("select",{required:!0,id:"playerCount",name:"playerCount",onChange:c,value:n.playerCount,children:[Object(B.jsx)("option",{value:2,children:"2 Players"}),Object(B.jsx)("option",{value:3,children:"3 Players"}),Object(B.jsx)("option",{value:4,children:"4 Players"})]})}),Object(B.jsx)("label",{htmlFor:"gameSize",children:"Game size:"}),Object(B.jsx)(Le,{className:"nes-select",children:Object(B.jsxs)("select",{required:!0,id:"gameSize",name:"gameSize",onChange:c,value:n.gameSize,children:[Object(B.jsx)("option",{value:3,children:"3x3"}),Object(B.jsx)("option",{value:5,children:"5x5"}),Object(B.jsx)("option",{value:9,children:"9x9"})]})})]}),Object(B.jsx)(l.b,{to:"/game",className:"nes-btn is-primary",onClick:i,children:"Play !"})]})},De=function(){return Object(B.jsx)(K,{children:Object(B.jsx)(l.a,{children:Object(B.jsxs)(o.c,{children:[Object(B.jsx)(o.a,{path:"/about-me",children:Object(B.jsx)(Se,{})}),Object(B.jsx)(o.a,{path:"/game",children:Object(B.jsx)(Ce,{})}),Object(B.jsx)(o.a,{path:"/game-setting",children:Object(B.jsx)(Ge,{})}),Object(B.jsx)(o.a,{path:"/",exact:!0,children:Object(B.jsx)(_,{})}),Object(B.jsx)(o.a,{path:"*",children:Object(B.jsx)(Me,{})})]})})})},Te=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,45)).then((function(n){var t=n.getCLS,i=n.getFID,a=n.getFCP,c=n.getLCP,r=n.getTTFB;t(e),i(e),a(e),c(e),r(e)}))};s.a.render(Object(B.jsx)(c.a.StrictMode,{children:Object(B.jsx)(De,{})}),document.getElementById("root")),Te()}},[[44,1,2]]]);
//# sourceMappingURL=main.5e4c14d8.chunk.js.map